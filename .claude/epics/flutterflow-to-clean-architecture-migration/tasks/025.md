---
epic: flutterflow-to-clean-architecture-migration
status: backlog
priority: P0
estimate: 3-4 hours
depends_on: [024]
week: 5
---

# Task 025: Write Tests and Deploy EventLog Feature

## Description

Write comprehensive tests for EventLog and Charts features and deploy to test environment. Verify end-to-end flow from ESP32 button press to chart display.

## Acceptance Criteria

- [ ] Unit tests for EventLog use cases
- [ ] Unit tests for Charts use cases
- [ ] BLoC tests for EventsBloc and ChartsBloc
- [ ] Widget tests for detail page and charts
- [ ] Integration test for ESP32 → EventLog → Charts flow
- [ ] Test coverage ≥ 70%
- [ ] Deploy and verify with ESP32

## Technical Details

**Test Matrix**:

| Test Case | Expected Result | Status |
|-----------|----------------|--------|
| ESP32 button press | Event saved to Firestore | [ ] |
| Event appears in list | Real-time update | [ ] |
| Chart updates | New data point added | [ ] |
| Date range filter | Chart shows filtered data | [ ] |
| Aggregation (daily) | Correct daily totals | [ ] |
| Aggregation (weekly) | Correct weekly totals | [ ] |
| Cumulative chart | Running total correct | [ ] |

**Integration Test**:
```dart
testWidgets('ESP32 event flow end-to-end', (tester) async {
  // 1. Connect to ESP32
  // 2. Press button on ESP32
  // 3. Verify event appears in list
  // 4. Verify chart updates
  // 5. Verify cumulative chart updates
});
```

## Dependencies

- Task 024: Detail page with charts

## Testing

Run full test suite:
```bash
flutter test
flutter test --coverage
```

Manual testing:
- Press ESP32 button multiple times
- Verify events appear in real-time
- Check charts update immediately
- Test date range filtering

## Notes

- This completes the core data visualization feature
- Charts should update smoothly without flicker
- Test with multiple items and events
- Verify performance with 1000+ events
