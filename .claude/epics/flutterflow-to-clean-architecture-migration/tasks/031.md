---
epic: flutterflow-to-clean-architecture-migration
status: backlog
priority: P0
estimate: 3-4 hours
depends_on: [030]
week: 7
---

# Task 031: Write Tests and Deploy Auth Feature

## Description

Write comprehensive tests for Auth feature and deploy. Verify email/password, Google Sign-In, and Apple Sign-In work correctly.

## Acceptance Criteria

- [ ] Unit tests for all auth use cases
- [ ] Auth BLoC tests with bloc_test
- [ ] Widget tests for login, signup, forgot password pages
- [ ] Integration tests for auth flows
- [ ] Test coverage ≥ 70%
- [ ] Deploy and verify all auth methods

## Technical Details

**Test Matrix**:

| Test Case | Expected Result | Status |
|-----------|----------------|--------|
| Email/password sign-in | Success → navigate to items | [ ] |
| Invalid email | Error shown | [ ] |
| Wrong password | Error shown | [ ] |
| Google Sign-In | Success → navigate to items | [ ] |
| Apple Sign-In (iOS) | Success → navigate to items | [ ] |
| Sign up | Account created → navigate to items | [ ] |
| Forgot password | Email sent confirmation | [ ] |
| Sign out | Navigate to login | [ ] |

**BLoC Tests**:
```dart
blocTest<AuthBloc, AuthState>(
  'emits [AuthLoading, Authenticated] when SignInWithEmail succeeds',
  build: () {
    when(() => mockSignInWithEmail(any()))
        .thenAnswer((_) async => Right(testUser));
    return authBloc;
  },
  act: (bloc) => bloc.add(SignInWithEmailEvent(
    email: 'test@example.com',
    password: 'password',
  )),
  expect: () => [
    AuthLoading(),
    Authenticated(testUser),
  ],
);
```

## Dependencies

- Task 030: Auth UI complete

## Testing

Manual tests:
1. Sign up with email/password
2. Sign out
3. Sign in with email/password
4. Test Google Sign-In
5. Test Apple Sign-In (iOS)
6. Test forgot password
7. Verify persistent login

## Notes

- Test on both Android and iOS
- Google Sign-In requires OAuth setup
- Apple Sign-In requires Apple Developer account
- Test with real email for password reset
