---
epic: flutterflow-to-clean-architecture-migration
status: backlog
priority: P2
estimate: 3-4 hours
depends_on: [035]
week: 8
---

# Task 036: Set Up Automated Versioning and Release Notes

## Description

Set up automated versioning system and CHANGELOG.md maintenance. Configure GitHub Actions for automated build number increments and release note generation.

## Acceptance Criteria

- [ ] CHANGELOG.md created following Keep a Changelog format
- [ ] Version bumping script created
- [ ] GitHub Actions workflow for releases configured
- [ ] Build number auto-increment on release
- [ ] Git tags created for releases
- [ ] Release notes auto-generated from commits

## Technical Details

**CHANGELOG.md**:
```markdown
# Changelog

All notable changes to Trackwise will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [1.0.0] - 2026-03-15

### Added
- Items CRUD functionality with Firestore sync
- ESP32 Bluetooth integration for hardware button tracking
- Real-time event logging from ESP32
- Bar charts and cumulative charts for data visualization
- CSV data export via email
- Email/password authentication
- Google Sign-In
- Apple Sign-In (iOS)
- User profile management
- GDPR data export (JSON)
- GDPR account deletion
- Privacy policy viewer
- Firebase Crashlytics for crash reporting
- Firebase Analytics for usage tracking
- Firebase Performance Monitoring

### Changed
- Migrated from FlutterFlow to Clean Architecture
- Replaced FlutterFlow state management with BLoC pattern

### Removed
- All FlutterFlow dependencies
- FlutterFlow-generated code

## [0.1.0] - 2026-01-15

### Added
- Initial FlutterFlow prototype
- Basic items management
- Simple Bluetooth connection

[Unreleased]: https://github.com/yourusername/trackwise/compare/v1.0.0...HEAD
[1.0.0]: https://github.com/yourusername/trackwise/releases/tag/v1.0.0
[0.1.0]: https://github.com/yourusername/trackwise/releases/tag/v0.1.0
```

**Version Bump Script** (`scripts/bump_version.sh`):
```bash
#!/bin/bash

# Get current version from pubspec.yaml
current_version=$(grep "version:" pubspec.yaml | sed 's/version: //' | sed 's/+.*//')
current_build=$(grep "version:" pubspec.yaml | sed 's/.*+//')

# Parse arguments
if [ "$1" == "major" ]; then
  new_version=$(echo $current_version | awk -F. '{print $1+1".0.0"}')
elif [ "$1" == "minor" ]; then
  new_version=$(echo $current_version | awk -F. '{print $1"."$2+1".0"}')
elif [ "$1" == "patch" ]; then
  new_version=$(echo $current_version | awk -F. '{print $1"."$2"."$3+1}')
else
  echo "Usage: ./bump_version.sh [major|minor|patch]"
  exit 1
fi

# Increment build number
new_build=$((current_build + 1))

# Update pubspec.yaml
sed -i "s/version: .*/version: $new_version+$new_build/" pubspec.yaml

echo "Version bumped to $new_version+$new_build"

# Create git tag
git add pubspec.yaml
git commit -m "chore: bump version to $new_version"
git tag -a "v$new_version" -m "Release $new_version"

echo "Created tag v$new_version"
echo "Push with: git push && git push --tags"
```

**GitHub Actions Release Workflow** (`.github/workflows/release.yml`):
```yaml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build-and-release:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.22.0'
          channel: 'stable'

      - name: Install dependencies
        run: flutter pub get

      - name: Run tests
        run: flutter test

      - name: Build Android AAB
        run: flutter build appbundle --release

      - name: Build Android APK
        run: flutter build apk --release

      - name: Generate Release Notes
        id: release_notes
        run: |
          # Extract changelog for this version
          VERSION=${GITHUB_REF#refs/tags/v}
          NOTES=$(sed -n "/## \[$VERSION\]/,/## \[/p" CHANGELOG.md | sed '1d;$d')
          echo "notes<<EOF" >> $GITHUB_OUTPUT
          echo "$NOTES" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT

      - name: Create GitHub Release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body: ${{ steps.release_notes.outputs.notes }}
          draft: false
          prerelease: false

      - name: Upload AAB to Release
        uses: actions/upload-release-asset@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          upload_url: ${{ steps.create_release.outputs.upload_url }}
          asset_path: build/app/outputs/bundle/release/app-release.aab
          asset_name: trackwise-${{ github.ref }}.aab
          asset_content_type: application/octet-stream
```

## Dependencies

- Task 035: Monitoring integrated

## Testing

Test versioning:
```bash
# Test version bump
./scripts/bump_version.sh patch
git log --oneline -1
git tag -l

# Test release workflow
git push origin v1.0.0
# Check GitHub Actions for successful build
```

## Notes

- Follow semantic versioning (MAJOR.MINOR.PATCH)
- Update CHANGELOG.md before each release
- Build number auto-increments in pubspec.yaml
- Git tags trigger GitHub Actions release workflow
- Release notes extracted from CHANGELOG.md
