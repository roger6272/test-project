---
epic: flutterflow-to-clean-architecture-migration
status: backlog
priority: P0
estimate: 4-6 hours
depends_on: [018, 019]
week: 4
---

# Task 020: Test with ESP32 Hardware and Deploy

## Description

Test Bluetooth feature with real ESP32 hardware to verify connection, item list transmission, and event reception work correctly. Deploy and verify 95%+ connection success rate.

## Acceptance Criteria

- [ ] ESP32 device configured and powered on
- [ ] Bluetooth scanning finds ESP32 device
- [ ] Connection established successfully (95%+ success rate)
- [ ] Item list transmitted and received by ESP32
- [ ] Timezone sent to ESP32
- [ ] Events received from ESP32 in real-time
- [ ] Chunking works correctly (180-byte MTU)
- [ ] No memory leaks during extended usage
- [ ] Deploy to test environment

## Technical Details

**Test Matrix**:

| Test Case | Expected Result | Status |
|-----------|----------------|--------|
| Scan for devices | ESP32 appears in list | [ ] |
| Connect to ESP32 | Connection succeeds < 5s | [ ] |
| Send 1 item | ESP32 receives item | [ ] |
| Send 10 items | All items received | [ ] |
| Send 50 items | Chunking works correctly | [ ] |
| Receive button press | Event arrives < 1s | [ ] |
| Connection loss | Auto-reconnect works | [ ] |
| Disconnect | Clean disconnection | [ ] |

**ESP32 Verification**:
- Check ESP32 serial monitor for received messages
- Verify item list parsed correctly
- Confirm timezone received
- Test button press sends event

**Performance Tests**:
- Connection time: < 5 seconds
- Item list transmission: < 2 seconds for 50 items
- Event latency: < 1 second
- Memory usage: Stable over 30 minutes

## Dependencies

- Task 018: Bluetooth UI complete
- Task 019: Tests passing
- ESP32 hardware with firmware

## Testing

Manual testing procedure:
1. Power on ESP32
2. Open app, navigate to Bluetooth search
3. Start scan, verify ESP32 appears
4. Connect, verify connection succeeds
5. Send item list from items page
6. Verify ESP32 receives items
7. Press button on ESP32
8. Verify event appears in app
9. Test disconnection
10. Test reconnection

Repeat 20 times to verify 95%+ success rate.

## Notes

- This is critical - Bluetooth must work reliably
- Test with various devices (different ESP32 models)
- Test with different phones (Android/iOS)
- Test in noisy BLE environments
- Document any issues for future debugging
