---
epic: flutterflow-to-clean-architecture-migration
status: backlog
priority: P0
estimate: 4-5 hours
depends_on: [036]
week: 8
---

# Task 037: Remove FlutterFlow Dependencies and Cleanup

## Description

Remove all FlutterFlow-generated code, dependencies, and replace FlutterFlowTheme with custom AppTheme. Complete the migration by eliminating all FlutterFlow remnants.

## Acceptance Criteria

- [ ] All FlutterFlow packages removed from pubspec.yaml
- [ ] `/flutter_flow/` directory deleted
- [ ] FlutterFlowTheme replaced with custom AppTheme
- [ ] All imports updated to use new AppTheme
- [ ] Unused packages removed
- [ ] Code cleaned and formatted
- [ ] No FlutterFlow references remain
- [ ] App builds and runs successfully

## Technical Details

**Remove FlutterFlow Packages**:
```yaml
# Remove these from pubspec.yaml:
# - flutter_flow_*
# - Any other FlutterFlow-specific packages
```

**Create Custom AppTheme** (`core/theme/app_theme.dart`):
```dart
import 'package:flutter/material.dart';
import 'app_colors.dart';

class AppTheme {
  static ThemeData lightTheme = ThemeData(
    useMaterial3: true,
    colorScheme: ColorScheme.fromSeed(
      seedColor: AppColors.primary,
      brightness: Brightness.light,
    ),
    appBarTheme: AppBarTheme(
      backgroundColor: AppColors.primary,
      foregroundColor: Colors.white,
      elevation: 0,
    ),
    elevatedButtonTheme: ElevatedButtonThemeData(
      style: ElevatedButton.styleFrom(
        backgroundColor: AppColors.primary,
        foregroundColor: Colors.white,
        padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.circular(8),
        ),
      ),
    ),
    inputDecorationTheme: InputDecorationTheme(
      border: OutlineInputBorder(
        borderRadius: BorderRadius.circular(8),
      ),
      filled: true,
      fillColor: Colors.grey[100],
    ),
    cardTheme: CardTheme(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(12),
      ),
    ),
  );

  static ThemeData darkTheme = ThemeData(
    useMaterial3: true,
    colorScheme: ColorScheme.fromSeed(
      seedColor: AppColors.primary,
      brightness: Brightness.dark,
    ),
    appBarTheme: AppBarTheme(
      backgroundColor: AppColors.primary,
      foregroundColor: Colors.white,
      elevation: 0,
    ),
    // ... similar styling for dark mode
  );
}
```

**AppColors** (`core/theme/app_colors.dart`):
```dart
import 'package:flutter/material.dart';

class AppColors {
  static const Color primary = Color(0xFF2196F3);
  static const Color secondary = Color(0xFF03DAC6);
  static const Color error = Color(0xFFB00020);
  static const Color success = Color(0xFF4CAF50);
  static const Color warning = Color(0xFFFF9800);

  // Background colors
  static const Color background = Color(0xFFFAFAFA);
  static const Color surface = Colors.white;

  // Text colors
  static const Color textPrimary = Color(0xFF212121);
  static const Color textSecondary = Color(0xFF757575);
}
```

**Update app.dart**:
```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      title: 'Trackwise',
      theme: AppTheme.lightTheme,
      darkTheme: AppTheme.darkTheme,
      themeMode: ThemeMode.system,
      routerConfig: router,
    );
  }
}
```

**Find and Replace**:
```bash
# Find all FlutterFlowTheme references
grep -r "FlutterFlowTheme" lib/

# Replace with AppTheme or Theme.of(context)
# Example:
# FlutterFlowTheme.of(context).primaryColor
# → Theme.of(context).colorScheme.primary

# Or use AppColors directly:
# FlutterFlowTheme.primaryColor → AppColors.primary
```

**Cleanup Commands**:
```bash
# Remove FlutterFlow directory
rm -rf lib/flutter_flow/

# Clean build
flutter clean

# Get dependencies
flutter pub get

# Remove unused imports
flutter pub run import_sorter:main

# Format code
dart format lib/

# Analyze
flutter analyze
```

**Package Cleanup**:
Review and remove unused packages:
- Check each package in pubspec.yaml
- Run `flutter pub deps` to see dependency tree
- Remove packages not imported anywhere
- Keep only essential packages

## Dependencies

- Task 036: Versioning set up
- All features migrated

## Testing

After cleanup:
- [ ] App builds without errors
- [ ] App runs on device
- [ ] All features still work
- [ ] No FlutterFlow references in codebase
- [ ] `flutter analyze` shows 0 errors
- [ ] All tests still pass

Verification commands:
```bash
# Search for any FlutterFlow references
grep -r "FlutterFlow" lib/
grep -r "flutter_flow" lib/

# Verify no errors
flutter analyze

# Run all tests
flutter test

# Build release
flutter build apk --release
flutter build appbundle --release
```

## Notes

- This is the final migration step
- Backup code before major deletions
- Test thoroughly after cleanup
- Create git commit before and after
- Document any remaining manual migrations needed
- This completes the FlutterFlow → Clean Architecture migration!
